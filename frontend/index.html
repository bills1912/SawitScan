<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SawitScan - Deteksi Kematangan Kelapa Sawit</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=Space+Mono:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <!-- Background Effects -->
    <div class="bg-pattern"></div>
    <div class="bg-grid"></div>
    <div class="glow-orb glow-orb-1"></div>
    <div class="glow-orb glow-orb-2"></div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
      <div class="loading-spinner"></div>
      <div class="loading-text">Menganalisis gambar...</div>
      <div class="loading-progress">
        <div class="loading-dot"></div>
        <div class="loading-dot"></div>
        <div class="loading-dot"></div>
      </div>
    </div>

    <!-- Header -->
    <header>
      <div class="logo">
        <div class="logo-icon">üå¥</div>
        <div>
          <div class="logo-text">SawitScan</div>
          <div class="logo-subtitle">Palm Fruit Detection</div>
        </div>
      </div>
      <div class="status-badge" id="statusBadge">
        <div class="status-dot"></div>
        <span>API Connected</span>
      </div>
    </header>

    <!-- Main Content -->
    <main>
      <!-- Upload Section -->
      <section class="upload-section">
        <div class="section-title">Upload Gambar</div>

        <div class="upload-zone" id="uploadZone">
          <div class="upload-icon">üì∑</div>
          <div class="upload-title">Drag & Drop gambar di sini</div>
          <div class="upload-subtitle">atau klik untuk memilih file</div>
          <div class="upload-formats">
            <span class="format-tag">JPG</span>
            <span class="format-tag">PNG</span>
            <span class="format-tag">WEBP</span>
          </div>
        </div>

        <input type="file" id="fileInput" accept="image/*" />

        <div class="preview-container" id="previewContainer">
          <img class="preview-image" id="previewImage" alt="Preview" />
          <div class="preview-info">
            <span class="preview-filename" id="previewFilename"></span>
            <span id="previewSize"></span>
          </div>
        </div>

        <div class="error-message" id="errorMessage"></div>

        <div class="btn-group">
          <button class="btn btn-primary" id="detectBtn" disabled>
            üîç Mulai Deteksi
          </button>
          <button class="btn btn-secondary" id="clearBtn" style="display: none">
            ‚úï Hapus
          </button>
        </div>
      </section>

      <!-- Results Section -->
      <section class="results-section">
        <div class="section-title">Hasil Deteksi</div>

        <div id="resultsPlaceholder" class="results-placeholder">
          <div class="results-placeholder-icon">üî¨</div>
          <p>
            Upload gambar buah kelapa sawit untuk memulai analisis kematangan
          </p>
        </div>

        <div id="resultsContent" style="display: none">
          <!-- Result Image -->
          <div class="result-image-container">
            <img class="result-image" id="resultImage" alt="Detection Result" />
            <div class="result-badge">
              <span>‚úì</span>
              <span id="resultBadgeText">Terdeteksi</span>
            </div>
          </div>

          <!-- Stats -->
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-label">Total Deteksi</div>
              <div class="stat-value highlight" id="totalDetections">0</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Kelas Terdeteksi</div>
              <div class="stat-value" id="totalClasses">0</div>
            </div>
          </div>

          <!-- Detection List -->
          <div class="detections-title">üìã Detail Deteksi</div>
          <div class="detection-list" id="detectionList"></div>

          <!-- Summary -->
          <div class="summary-section">
            <div class="summary-title">üìä Ringkasan per Kelas</div>
            <div class="summary-grid" id="summaryGrid"></div>
          </div>
          <div class="json-section">
            <div class="section-title">üîå API Data Inspector</div>

            <div class="json-grid">
              <div class="json-box">
                <div class="json-header">
                  <span class="json-title">REQUEST METADATA (INPUT)</span>
                  <button
                    class="copy-btn"
                    onclick="copyToClipboard('jsonInputContent')"
                  >
                    Copy
                  </button>
                </div>
                <pre class="json-content" id="jsonInputContent">
// Menunggu input...</pre
                >
              </div>

              <div class="json-box">
                <div class="json-header">
                  <span class="json-title">RESPONSE BODY (OUTPUT)</span>
                  <button
                    class="copy-btn"
                    onclick="copyToClipboard('jsonOutputContent')"
                  >
                    Copy
                  </button>
                </div>
                <pre class="json-content" id="jsonOutputContent">
// Menunggu hasil deteksi...</pre
                >
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer>
      <p>
        SawitScan &copy; 2024 - Sistem Deteksi Kematangan Kelapa Sawit
        menggunakan YOLO
      </p>
      <p>
        Backend:
        <a href="https://billsar1912-sawit-scan.hf.space/docs" target="_blank"
          >FastAPI Documentation</a
        >
      </p>
    </footer>

    <script src="script.js"></script>
  </body>
</html>
